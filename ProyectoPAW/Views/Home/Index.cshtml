@using System.Security.Claims
@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
}

@if (User.Identity.IsAuthenticated)
{

    @* saca el usuario actual junto con sus identidades *@
    var claimsIdentity = User.Identity as System.Security.Claims.ClaimsIdentity;
    @* Se saca el rol y si no lo tiene se asigna uno *@
    var roleOfUser = claimsIdentity != null ? claimsIdentity.Claims.FirstOrDefault(x => x.Type == ClaimTypes.Role).Value : "Estudiante";


    if (roleOfUser == "Administrador")
    {
        @await Html.PartialAsync("_HomeAdmin")
    }
    else if (roleOfUser == "Profesor")
    {
        @await Html.PartialAsync("_HomeProfesor")
    }
    else if (roleOfUser == "Estudiante")
    {
        @await Html.PartialAsync("_HomeEstudiante")
    }
}
else
{
    @await Html.PartialAsync("_HomeNoLoggeado")
}
